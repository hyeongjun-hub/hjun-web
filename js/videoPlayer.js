(()=>{var e=document.querySelector("video"),t=document.getElementById("play"),n=t.querySelector("i"),u=document.getElementById("mute"),d=u.querySelector("i"),a=document.getElementById("volume"),o=document.getElementById("currentTime"),i=document.getElementById("totalTime"),r=document.getElementById("timeline"),c=document.getElementById("fullScreen"),l=c.querySelector("i"),s=document.getElementById("videoContainer"),m=document.getElementById("videoControls"),v=document.querySelector("textarea"),f=null,E=null,L=.5;e.volume=L;var y=function(){e.paused?e.play():e.pause(),n.classList=e.paused?"fas fa-play":"fas fa-pause"},p=function(e){return new Date(1e3*e).toISOString().substr(14,5)},g=function(){i.innerText=p(Math.floor(e.duration)),r.max=Math.floor(e.duration)},T=function(){return m.classList.remove("showing")},S=function(e){"Space"===e.code&&y()};document.addEventListener("keydown",S),v&&(v.addEventListener("focus",(function(){document.removeEventListener("keydown",S)})),v.addEventListener("blur",(function(){document.addEventListener("keydown",S)}))),4===e.readyState&&g(),e.addEventListener("click",y),t.addEventListener("click",y),u.addEventListener("click",(function(){e.muted?e.muted=!1:e.muted=!0,d.classList=e.muted?"fas fa-volume-mute":"fas fa-volume-up",a.value=e.muted?0:L})),a.addEventListener("input",(function(t){var n=t.target.value;e.muted&&(e.muted=!1,u.innerText="Mute"),L=n,e.volume=n})),e.addEventListener("loadedmetadata",g),e.addEventListener("timeupdate",(function(){o.innerText=p(Math.floor(e.currentTime)),r.value=Math.floor(e.currentTime)})),e.addEventListener("ended",(function(){var e=s.dataset.id;fetch("/api/videos/".concat(e,"/view"),{method:"POST"})})),s.addEventListener("mousemove",(function(){f&&(clearTimeout(f),f=null),E&&(clearTimeout(E),E=null),m.classList.add("showing"),E=setTimeout(T,3e3)})),s.addEventListener("mouseleave",(function(){f=setTimeout(T,3e3)})),r.addEventListener("input",(function(t){var n=t.target.value;e.currentTime=n})),c.addEventListener("click",(function(){document.fullscreenElement?(document.exitFullscreen(),l.classList="fas fa-expand"):(s.requestFullscreen(),l.classList="fas fa-compress")}))})();